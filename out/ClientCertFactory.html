<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: ClientCertFactory</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: ClientCertFactory</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>ClientCertFactory<span class="signature">(binpath, root_cert, domains, hash, curve, lifetime_days, subjectBase)</span><span class="type-signature"></span></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    
    <h4 class="name" id="ClientCertFactory"><span class="type-signature"></span>new ClientCertFactory<span class="signature">(binpath, root_cert, domains, hash, curve, lifetime_days, subjectBase)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    ClientCertFactory properties.
This function will throw an exception if the OpenSSL binary is not found.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>binpath</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">A path to the OpenSSL binary, global if falsey</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>root_cert</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">The PEM string representing the root certificate authority.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>domains</code></td>
            

            <td class="type">
            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>hash</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            
                <td class="default">
                
                    sha256
                
                </td>
            

            <td class="description last">A string representing the hash function to sign the certificate with (ex. sha256)</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>curve</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            
                <td class="default">
                
                    prime256v1
                
                </td>
            

            <td class="description last">The name of the eliptical curve to use (from `openssl ecparam -list_curves`).
Different curves may or may not be supported by the version of OpenSSL you are using.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>lifetime_days</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            
                <td class="default">
                
                    200
                
                </td>
            

            <td class="description last">The number of days to issue certificates for. 
Certificates will automatically be valid from the time issued</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>subjectBase</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">An object
specifiying some information to put on all the certificates.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_ClientCertFactory.js.html">lib/ClientCertFactory.js</a>, <a href="lib_ClientCertFactory.js.html#line53">line 53</a>
    </li></ul></dd>
    

    

    

    
</dl>




















    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="create_cert"><span class="type-signature">(async) </span>create_cert<span class="signature">(root_priv_key, common_name, use_extensions)</span><span class="type-signature"> &rarr; {Object}</span></h4>
    

    



<div class="description">
    Create a client certificate.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>root_priv_key</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">The private key of the root certificate provided in the constructor, in PEM format.
This argument is passed here instead of the constructor to allow removing the key from memory when it is not in use.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>common_name</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">Common name to use for the certificate, should be something unique/generated</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>use_extensions</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            
                <td class="default">
                
                    true
                
                </td>
            

            <td class="description last">Whether or not to use extensions restricting the use of the issued certificate.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_ClientCertFactory.js.html">lib/ClientCertFactory.js</a>, <a href="lib_ClientCertFactory.js.html#line91">line 91</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    An object with all of the generated values.
key is the private key in PEM format, key_raw is just the private key in base64, and fingerprint is the sha256 fingerprint
of the client certificate, in the format provided by the nodejs TLS engine.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Object</span>


    </dd>
</dl>

    





        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-middleware.html">middleware</a></li></ul><h3>Classes</h3><ul><li><a href="ClientCertFactory.html">ClientCertFactory</a></li><li><a href="DeviceModel.html">DeviceModel</a></li></ul><h3>Global</h3><ul><li><a href="global.html#express">express</a></li><li><a href="global.html#fs">fs</a></li><li><a href="global.html#MongoClient">MongoClient</a></li><li><a href="global.html#PEM2BUF">PEM2BUF</a></li><li><a href="global.html#promisifyOpenSSL">promisifyOpenSSL</a></li><li><a href="global.html#RegisterDeviceSchema">RegisterDeviceSchema</a></li><li><a href="global.html#stripPEM">stripPEM</a></li><li><a href="global.html#wrapAsync">wrapAsync</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Thu Sep 19 2019 15:22:25 GMT-0700 (Pacific Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>